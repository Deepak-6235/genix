// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Language {
  id        String   @id @default(cuid())
  code      String   @unique // 'en', 'ar', 'pt', 'zh', 'ja', 'de', 'fr'
  name      String   // 'English', 'Arabic', 'Portuguese', etc.
  dir       String   @default("ltr") // 'ltr' or 'rtl'
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  services  Service[] @relation("ServiceLanguage")
  blogs     Blog[]    @relation("BlogLanguage")
  faqs      FAQ[]     @relation("FAQLanguage")

  @@map("languages")
}

model Admin {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String?
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("admins")
}

model Service {
  id                    String   @id @default(cuid())
  slug                  String
  languageId            String   // Foreign key to Language table
  language              Language @relation("ServiceLanguage", fields: [languageId], references: [id])

  // Content fields
  title                 String
  shortDescription      String   @db.Text
  fullDescription       String?  @db.Text
  servicesProvided      String?  @db.Text
  targetInsects         String?  @db.Text
  methodsTitle          String?
  methodsDescription    String?  @db.Text
  advancedTechnologies  String?  @db.Text
  safeUseDescription    String?  @db.Text
  serviceGuarantee      String?  @db.Text
  imageUrl              String?  // S3 image URL

  // Meta
  isActive              Boolean  @default(true)
  order                 Int      @default(0)
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  // Unique constraint: same slug can have multiple languages
  @@unique([slug, languageId], name: "slug_languageId")
  @@map("services")
}

model Blog {
  id                    String   @id @default(cuid())
  slug                  String
  languageId            String   // Foreign key to Language table
  language              Language @relation("BlogLanguage", fields: [languageId], references: [id])

  // Content fields
  title                 String
  excerpt               String   @db.Text
  content               String   @db.Text
  imageUrl              String?  // S3 image URL
  author                String?
  publishedAt           DateTime?

  // Meta
  isActive              Boolean  @default(true)
  order                 Int      @default(0)
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  // Unique constraint: same slug can have multiple languages
  @@unique([slug, languageId], name: "slug_languageId")
  @@map("blogs")
}

model Statistic {
  id        String   @id @default(cuid())
  label     String   // e.g., "Specialized Technicians", "Happy Customers"
  value     Int      // e.g., 45, 1230
  icon      String?  // Icon emoji or name
  order     Int      @default(0)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("statistics")
}

model AboutUs {
  id              String   @id @default(cuid())
  email           String?
  phoneNumber1    String?  // First phone number
  phoneNumber2    String?  // Second phone number
  workingHours    String?  // e.g., "24/7"
  address         String?  // Full address
  city            String?  // City name
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("about_us")
}

model Review {
  id        String   @id @default(cuid())
  name      String   // Customer name
  text      String   @db.Text // Review text
  isActive  Boolean  @default(true)
  order     Int      @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("reviews")
}

model FAQ {
  id          String   @id @default(cuid())
  languageId  String   // Foreign key to Language table
  language    Language @relation("FAQLanguage", fields: [languageId], references: [id])
  
  // Content fields
  question    String   @db.Text
  answer      String   @db.Text
  
  // Meta
  isActive    Boolean  @default(true)
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("faqs")
}
